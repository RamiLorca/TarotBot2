{"ast":null,"code":"import { Carousel3d, Slide } from \"vue-carousel-3d\";\nimport { mapGetters, mapActions, mapState } from 'vuex';\nexport default {\n  name: 'TarotCards',\n  props: {\n    isVisible: {\n      type: Boolean,\n      required: true\n    },\n    incrementProgressBar: {\n      type: Function,\n      required: true\n    }\n  },\n  data() {\n    return {\n      isContracted: false,\n      loading: false,\n      touchStartX: 0,\n      touchMoveX: 0,\n      isSliding: false,\n      slideThreshold: 50,\n      isMobile: window.innerWidth\n    };\n  },\n  components: {\n    Carousel3d,\n    Slide\n  },\n  updated() {\n    try {\n      const carouselElement = this.$refs.carousel?.$el;\n      if (carouselElement) {\n        carouselElement.removeEventListener('touchstart', this.onTouchStart);\n        carouselElement.removeEventListener('touchmove', this.onTouchMove);\n        carouselElement.removeEventListener('touchend', this.onTouchEnd);\n        carouselElement.addEventListener('touchstart', this.onTouchStart);\n        carouselElement.addEventListener('touchmove', this.onTouchMove);\n        carouselElement.addEventListener('touchend', this.onTouchEnd);\n      }\n    } catch (error) {\n      console.error('Error in handling carousel events:', error);\n    }\n  },\n  beforeUnmount() {\n    const carouselElement = this.$refs.carousel.$el;\n    carouselElement.removeEventListener('touchstart', this.onTouchStart);\n    carouselElement.removeEventListener('touchmove', this.onTouchMove);\n    carouselElement.removeEventListener('touchend', this.onTouchEnd);\n  },\n  computed: {\n    ...mapGetters(['allTarotCards', 'selectedCards']),\n    ...mapState(['userQuery']),\n    mainDeck() {\n      return this.allTarotCards;\n    },\n    mainDeckLength() {\n      return this.allTarotCards.length;\n    },\n    selectedCardsCount() {\n      return this.$store.state.selectedCardsCount;\n    },\n    isVisibleCarousel() {\n      return this.windowWidth < 720;\n    }\n  },\n  created() {\n    this.$store.dispatch('fetchTarotDeck');\n  },\n  methods: {\n    ...mapActions(['shuffleMainDeck', 'moveToSelectedCards', 'incrementSelectedCardsCount']),\n    shuffleDeck() {\n      this.loading = true;\n      this.isContracted = true;\n      setTimeout(() => {\n        this.shuffleMainDeck();\n        this.isContracted = false;\n        this.loading = false;\n      }, 2000);\n      console.log(this.mainDeck);\n    },\n    moveCardToSelected(card) {\n      if (this.selectedCardsCount < 3) {\n        this.moveToSelectedCards(card);\n        this.incrementSelectedCardsCount();\n      }\n      if (this.selectedCardsCount === 3) {\n        this.incrementProgressBar();\n        this.$store.commit('hideTarotCards');\n      }\n    },\n    onTouchStart(event) {\n      this.touchStartX = event.touches[0].clientX;\n      this.isSliding = true;\n    },\n    onTouchMove(event) {\n      if (this.isSliding) {\n        this.touchMoveX = event.touches[0].clientX;\n        const diff = this.touchMoveX - this.touchStartX;\n        if (Math.abs(diff) > this.slideThreshold) {\n          this.isSliding = false;\n          if (diff > 0) {\n            this.$refs.carousel.prev();\n          } else {\n            this.$refs.carousel.next();\n          }\n        }\n      }\n    },\n    onTouchEnd() {\n      this.isSliding = false;\n    },\n    handleResize() {\n      this.windowWidth = window.innerWidth;\n    }\n  }\n};","map":{"version":3,"names":["Carousel3d","Slide","mapGetters","mapActions","mapState","name","props","isVisible","type","Boolean","required","incrementProgressBar","Function","data","isContracted","loading","touchStartX","touchMoveX","isSliding","slideThreshold","isMobile","window","innerWidth","components","updated","carouselElement","$refs","carousel","$el","removeEventListener","onTouchStart","onTouchMove","onTouchEnd","addEventListener","error","console","beforeUnmount","computed","mainDeck","allTarotCards","mainDeckLength","length","selectedCardsCount","$store","state","isVisibleCarousel","windowWidth","created","dispatch","methods","shuffleDeck","setTimeout","shuffleMainDeck","log","moveCardToSelected","card","moveToSelectedCards","incrementSelectedCardsCount","commit","event","touches","clientX","diff","Math","abs","prev","next","handleResize"],"sources":["src/components/TarotCards.vue"],"sourcesContent":["<template>\n    <div class=\"main\" >\n\n      <v-btn \n        dark \n        elevated \n        style=\"color: #161623;background-color: #d2cfd2\"\n        :disabled=\"loading\"\n        :loading=\"loading\"\n        class=\"text-none mb-4\"\n        size=\"large\"\n        variant=\"flat\" \n        @click=\"shuffleDeck\"\n      >\n        Shuffle\n      </v-btn>\n\n        <div :class=\"{'contracted': isContracted}\" class=\"card-list-wrapper\">\n          <transition class=\"fade-in\">\n            <section class=\"card-list\" v-if=\"isVisible\">\n              <article class=\"card\" v-for=\"card in mainDeck\" :key=\"card.name\" @click=\"moveCardToSelected(card)\">\n                  <div class=\"card-img\" >\n                      <img src=\"@/assets/Back5.png\" alt=\"back-of-card\">\n                  </div>\n              </article>\n            </section>\n        </transition>\n      </div>\n\n\n\n      <carousel-3d :width=\"180\" :height=\"290\" style=\"margin-top:30px\" ref=\"carousel\">\n\n        <slide class=\"carousel-slide\" v-for=\"(card, i) in mainDeck\" :index=\"i\" :key=\"card.name\">\n          <figure class=\"carousel-figure\" @click=\"moveCardToSelected(card)\">\n              <div class=\"carousel-card\" >\n                <img src=\"@/assets/Back5.png\" alt=\"back-of-card\">\n              </div>\n          </figure>\n        </slide>\n\n      </carousel-3d>\n\n      <!-- <div class=\"sliding-bar\" v-if=\"isVisibleCarousel\">\n        <div class=\"slider\" :style=\"{ width: `${(selectedCardsCount / mainDeckLength) * 100}%` }\"></div>\n      </div> -->\n\n\n    </div>\n</template>\n\n<script>\nimport { Carousel3d, Slide } from \"vue-carousel-3d\";\nimport { mapGetters, mapActions, mapState } from 'vuex';\n\nexport default {\n    name: 'TarotCards',\n    props: {\n      isVisible: {\n        type: Boolean,\n        required: true,\n      },\n      incrementProgressBar: {\n        type: Function,\n        required: true,\n      },\n    },\n    data() {\n      return {\n        isContracted: false,\n        loading: false,\n        touchStartX: 0,\n        touchMoveX: 0,\n        isSliding: false,\n        slideThreshold: 50,\n        isMobile: window.innerWidth,\n      };\n    },\n    components: {\n      Carousel3d,\n      Slide,\n    },\n    updated() {\n      try {\n        const carouselElement = this.$refs.carousel?.$el;\n        if (carouselElement) {\n          carouselElement.removeEventListener('touchstart', this.onTouchStart);\n          carouselElement.removeEventListener('touchmove', this.onTouchMove);\n          carouselElement.removeEventListener('touchend', this.onTouchEnd);\n\n          carouselElement.addEventListener('touchstart', this.onTouchStart);\n          carouselElement.addEventListener('touchmove', this.onTouchMove);\n          carouselElement.addEventListener('touchend', this.onTouchEnd);\n        }\n      } catch (error) {\n        console.error('Error in handling carousel events:', error);\n      }\n    },\n    beforeUnmount() {\n      const carouselElement = this.$refs.carousel.$el;\n      carouselElement.removeEventListener('touchstart', this.onTouchStart);\n      carouselElement.removeEventListener('touchmove', this.onTouchMove);\n      carouselElement.removeEventListener('touchend', this.onTouchEnd);\n    },\n    computed: {\n        ...mapGetters(['allTarotCards', 'selectedCards']),\n        ...mapState(['userQuery']),\n        mainDeck() {\n            return this.allTarotCards;\n        },\n        mainDeckLength() {\n          return this.allTarotCards.length;\n        },\n        selectedCardsCount() {\n          return this.$store.state.selectedCardsCount;\n        },\n        isVisibleCarousel() {\n          return this.windowWidth < 720;\n        },\n    },\n    created() {\n        this.$store.dispatch('fetchTarotDeck');\n    },\n    methods: {\n      ...mapActions(['shuffleMainDeck', 'moveToSelectedCards', 'incrementSelectedCardsCount']),\n      shuffleDeck() {\n        this.loading = true;\n        this.isContracted = true;\n        setTimeout(() => {\n          this.shuffleMainDeck();\n          this.isContracted = false;\n          this.loading = false;\n        }, 2000);\n        console.log(this.mainDeck);\n      },\n      moveCardToSelected(card) {\n        if (this.selectedCardsCount < 3) {\n          this.moveToSelectedCards(card);\n          this.incrementSelectedCardsCount();\n        }\n        if(this.selectedCardsCount === 3) {\n          this.incrementProgressBar();\n          this.$store.commit('hideTarotCards');\n        }\n      },\n      onTouchStart(event) {\n        this.touchStartX = event.touches[0].clientX;\n        this.isSliding = true;\n      },\n      onTouchMove(event) {\n        if (this.isSliding) {\n          this.touchMoveX = event.touches[0].clientX;\n          const diff = this.touchMoveX - this.touchStartX;\n          if (Math.abs(diff) > this.slideThreshold) {\n            this.isSliding = false;\n            if (diff > 0) {\n              this.$refs.carousel.prev();\n            } else {\n              this.$refs.carousel.next();\n            }\n          }\n        }\n      },\n      onTouchEnd() {\n        this.isSliding = false;\n      },\n      handleResize() {\n        this.windowWidth = window.innerWidth;\n      },\n    },\n};\n</script>\n\n<style>\n\n.main {\n    padding: 0;\n    margin: 0;\n    background-color: #161623;\n    color: white;\n    font-family: 'DM Mono', monospace;\n    max-width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-family: Avenir;\n}\n\na {\n    text-decoration: none;\n}\n\n.buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  gap: 10%;\n}\n\n.card-list {\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding-left: 7%;\n    padding-right: 5%;\n    padding-bottom: 5%;\n    height: 100%;\n    max-width: 90%;\n    margin: auto;\n    box-sizing: border-box;\n}\n\n.card-list::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n}\n\n.card-list-wrapper {\n  max-width: 100%;\n  animation-duration: 2s; \n  animation-timing-function: ease-in-out;\n}\n\n@keyframes accordion-effect {\n  0% {\n    max-width: 100%;\n  }\n  50% {\n    max-width: 20%;\n  }\n  100% {\n    max-width: 100%;\n  }\n}\n.card-list-wrapper.contracted {\n  animation-name: accordion-effect;\n}\n\n.card {\n    height: auto;\n    max-width: 140px;\n    padding: 1.5rem;\n    border-radius: 10%;\n    background: #2c2461;\n    box-shadow: -30px 0px 25px -30px rgba(0,0,0,0.63);\n    display: flex;\n    flex-direction: column;;\n    transition: .2s;\n    margin: 40px 0;\n    padding: 0;\n    clear: both;\n    position: relative;\n    overflow: hidden;\n    border: .5px solid #e0dddf;\n}\n\n\n.card-img {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.card-img img {\n    object-fit: cover;\n    width: 100%;\n    height: 100%;\n}\n\n.card:hover {\n    transform: translateY(3rem) translateX(-1rem);\n    box-shadow: 0 0px 20px 10px rgba(255, 255, 255, 0.168) inset;\n    box-shadow: 0 0px 20px 5px rgba(255, 255, 255, 0.168);\n    cursor: pointer;\n}\n\n.card:not(:first-child) {\n    margin-left: -119px;\n} \n\n\n@media (max-width: 1120px) {\n  .card-list {\n    padding-left: 13%;\n  }\n}\n\n@media (max-width: 800px) {\n  .card-list {\n    padding-left: 21%;\n  }\n}\n\n@media (min-width: 720px) {\n  .carousel-3d {\n    display: none !important;\n  }\n\n  .sliding-bar {\n    display: none;\n  }\n}\n\n@media (max-width: 720px) {\n    .card-list-wrapper {\n      display: none;\n    }\n\n    .carousel-3d {\n      display: flex !important;\n    }\n\n    .carousel-3d-container figure {\n      margin: 0;\n    }\n\n    .carousel-slide {\n      border-radius: 10% !important;\n      width: auto;\n    }\n\n    .carousel-card {\n      width: 100%;\n      height: 100%;\n      padding: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;   \n    }\n\n    .carousel-card img {\n      background-color: #2c2460;\n      object-fit: cover;\n      width: 100%;\n      height: 100%;\n    }\n\n    .sliding-bar {\n      width: 100%;\n      height: 5px;\n      background-color: #4f4e5e;\n      position: relative;\n      margin-top: 10px;\n    }\n\n    .slider {\n      height: 100%;\n      background-color: #d2cfd2;\n      transition: width 0.3s ease;\n    }\n\n}\n\n</style>"],"mappings":"AAoDA,SAAAA,UAAA,EAAAC,KAAA;AACA,SAAAC,UAAA,EAAAC,UAAA,EAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,SAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;IACA;IACAC,oBAAA;MACAH,IAAA,EAAAI,QAAA;MACAF,QAAA;IACA;EACA;EACAG,KAAA;IACA;MACAC,YAAA;MACAC,OAAA;MACAC,WAAA;MACAC,UAAA;MACAC,SAAA;MACAC,cAAA;MACAC,QAAA,EAAAC,MAAA,CAAAC;IACA;EACA;EACAC,UAAA;IACAvB,UAAA;IACAC;EACA;EACAuB,QAAA;IACA;MACA,MAAAC,eAAA,QAAAC,KAAA,CAAAC,QAAA,EAAAC,GAAA;MACA,IAAAH,eAAA;QACAA,eAAA,CAAAI,mBAAA,oBAAAC,YAAA;QACAL,eAAA,CAAAI,mBAAA,mBAAAE,WAAA;QACAN,eAAA,CAAAI,mBAAA,kBAAAG,UAAA;QAEAP,eAAA,CAAAQ,gBAAA,oBAAAH,YAAA;QACAL,eAAA,CAAAQ,gBAAA,mBAAAF,WAAA;QACAN,eAAA,CAAAQ,gBAAA,kBAAAD,UAAA;MACA;IACA,SAAAE,KAAA;MACAC,OAAA,CAAAD,KAAA,uCAAAA,KAAA;IACA;EACA;EACAE,cAAA;IACA,MAAAX,eAAA,QAAAC,KAAA,CAAAC,QAAA,CAAAC,GAAA;IACAH,eAAA,CAAAI,mBAAA,oBAAAC,YAAA;IACAL,eAAA,CAAAI,mBAAA,mBAAAE,WAAA;IACAN,eAAA,CAAAI,mBAAA,kBAAAG,UAAA;EACA;EACAK,QAAA;IACA,GAAAnC,UAAA;IACA,GAAAE,QAAA;IACAkC,SAAA;MACA,YAAAC,aAAA;IACA;IACAC,eAAA;MACA,YAAAD,aAAA,CAAAE,MAAA;IACA;IACAC,mBAAA;MACA,YAAAC,MAAA,CAAAC,KAAA,CAAAF,kBAAA;IACA;IACAG,kBAAA;MACA,YAAAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAJ,MAAA,CAAAK,QAAA;EACA;EACAC,OAAA;IACA,GAAA9C,UAAA;IACA+C,YAAA;MACA,KAAAnC,OAAA;MACA,KAAAD,YAAA;MACAqC,UAAA;QACA,KAAAC,eAAA;QACA,KAAAtC,YAAA;QACA,KAAAC,OAAA;MACA;MACAoB,OAAA,CAAAkB,GAAA,MAAAf,QAAA;IACA;IACAgB,mBAAAC,IAAA;MACA,SAAAb,kBAAA;QACA,KAAAc,mBAAA,CAAAD,IAAA;QACA,KAAAE,2BAAA;MACA;MACA,SAAAf,kBAAA;QACA,KAAA/B,oBAAA;QACA,KAAAgC,MAAA,CAAAe,MAAA;MACA;IACA;IACA5B,aAAA6B,KAAA;MACA,KAAA3C,WAAA,GAAA2C,KAAA,CAAAC,OAAA,IAAAC,OAAA;MACA,KAAA3C,SAAA;IACA;IACAa,YAAA4B,KAAA;MACA,SAAAzC,SAAA;QACA,KAAAD,UAAA,GAAA0C,KAAA,CAAAC,OAAA,IAAAC,OAAA;QACA,MAAAC,IAAA,QAAA7C,UAAA,QAAAD,WAAA;QACA,IAAA+C,IAAA,CAAAC,GAAA,CAAAF,IAAA,SAAA3C,cAAA;UACA,KAAAD,SAAA;UACA,IAAA4C,IAAA;YACA,KAAApC,KAAA,CAAAC,QAAA,CAAAsC,IAAA;UACA;YACA,KAAAvC,KAAA,CAAAC,QAAA,CAAAuC,IAAA;UACA;QACA;MACA;IACA;IACAlC,WAAA;MACA,KAAAd,SAAA;IACA;IACAiD,aAAA;MACA,KAAArB,WAAA,GAAAzB,MAAA,CAAAC,UAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}